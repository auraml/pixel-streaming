{"version":3,"file":"pixel-streaming.cjs.development.js","sources":["../src/context/useGlobalContext/reducer.ts","../src/context/useGlobalContext/initial.ts","../src/configs/project.ts","../src/configs/utils/npm.ts","../src/configs/utils/license.ts","../src/context/useGlobalContext/actions.ts","../src/context/useGlobalContext/index.tsx","../src/context/useStreamContext/reducer.ts","../src/context/useStreamContext/initial.ts","../src/context/useStreamContext/actions.ts","../src/context/useStreamContext/index.tsx","../src/context/index.tsx","../src/components/JsonView/index.tsx","../src/hooks.stream/useStreamActions/useSave.tsx","../src/hooks.stream/useStreamActions/index.ts","../src/hooks.player/usePreloader.ts","../src/hooks/useEventListener.ts","../src/hooks.stream/useStreamEvents.ts","../src/hooks/useWindowSize.ts","../src/hooks.stream/useStreamResponses/useResponseSave.tsx","../src/hooks.stream/useStreamResponses/index.ts","../src/configs/utils/watermark.ts","../src/hooks.player/useWatermark.ts","../src/snippets/Player/Preloader.tsx","../src/hooks/useMedia.ts","../src/snippets/Toolbar/Appbar/index.tsx","../src/components/Drawer/index.tsx","../src/snippets/Drawers/DrawerInfo/Container.tsx","../src/snippets/Drawers/DrawerInfo/index.tsx","../src/snippets/Toolbar/UiButton.tsx","../src/snippets/Toolbar/PackageUpdate.tsx","../src/snippets/Toolbar/index.tsx","../src/snippets/Container.tsx","../src/snippets/Player/PlayerComponent.tsx","../src/snippets/Player/index.tsx","../src/index.tsx"],"sourcesContent":["import { StateProps } from './initial'\n\nconst KEYS = {\n  UPDATE: 'UPDATE'\n}\n\nfunction Reducer(state: StateProps, action: any) {\n  const { type, payload: anValue } = action\n\n  if (type === KEYS.UPDATE) {\n    return { ...state, ...anValue }\n  }\n\n  return state\n}\n\nexport { Reducer, KEYS }\n","import { LicenseData } from '../../configs/utils/license'\n\n// Types\nexport interface StateProps {\n  packageVersion: {\n    latest: null | string,\n    current: null | string,\n    needUpdate: boolean,\n  }\n  showPreloader: boolean\n  licenseData: LicenseData | null\n}\n\nexport const initialState: StateProps = {\n\n  packageVersion: {\n    latest: null,\n    current: null,\n    needUpdate: false,\n  },\n  showPreloader: true,\n  licenseData: null,\n}","// package\nimport pkg from '../../package.json'\n\nconst isDev = process.env.NODE_ENV == 'development'\n\nlet apiHost = 'https://unrealos.com'\n// if (isDev) apiHost = 'http://0.0.0.0:8000'\n\n\ninterface Project {\n  isDev: boolean\n  apiHost: string\n  name: string\n  package: {\n    name: string\n    version: string\n    npmUrl: string\n  }\n  license: {\n    excludes: string[],\n    checkUrl: string\n  }\n  urls: {\n    main: string\n    docs: string\n    support: string\n    buy: string\n    signalingServer: string\n    onlinePlayer: string\n  }\n}\n\nconst project: Project = {\n  isDev,\n  apiHost,\n  name: 'MetaEditor',\n  package: {\n    name: pkg.name,\n    version: pkg.version,\n    npmUrl: `https://www.npmjs.com/package/${pkg.name}`,\n  },\n  license: {\n    excludes: ['localhost', '127.0.0.1', '0.0.0.0', 'player.metaeditor.io'],\n    checkUrl: `${apiHost}/api/unrealos/license/check/`,\n  },\n  urls: {\n    main: 'http://metaeditor.io/',\n    docs: 'https://metaeditor.io/docs',\n    support: 'https://unrealos.com/p/contacts/',\n    buy: 'https://unrealos.com/apps/metaeditor/',\n    signalingServer: 'https://github.com/markolofsen/metaeditor/releases/tag/signaling-server',\n    onlinePlayer: 'https://player.metaeditor.io',\n  },\n}\n\nexport default project","import project from \"../project\";\n\n// libs\nimport semver from 'semver'\n\n\nexport default async function checkPackageVersion() {\n  const url = `https://registry.npmjs.org/${project.package.name}`\n\n  const v = await new Promise((resolve, reject) => {\n\n    fetch(url)\n      .then(res => res.json())\n      .then(res => {\n        try {\n          const latest = res['dist-tags'].latest\n          const current = project.package.version\n          const needUpdate = semver.gt(latest, current)\n          resolve({\n            latest,\n            current,\n            needUpdate,\n          })\n\n        } catch (err) {\n          console.error(`Can't parse npm data`)\n          resolve(null)\n        }\n      })\n      .catch((err) => {\n        console.error(`Can't check package version`)\n        resolve(false)\n      });\n\n  });\n\n  return v\n\n}","import project from \"../project\";\n\nexport interface LicenseData {\n  is_exclusion: boolean\n  is_valid: boolean\n}\n\nexport default async function checkLicenseKey() {\n  const url = project.license.checkUrl\n\n  const v: LicenseData = await new Promise((resolve, reject) => {\n\n    const host = window.location.hostname\n\n    if (project.license.excludes.includes(host)) {\n\n      resolve({\n        is_exclusion: true,\n        is_valid: false,\n      })\n\n      return\n    }\n\n\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        host,\n      })\n    })\n      .then(res => res.json())\n      .then(res => {\n\n        // alert(JSON.stringify(res, null, 2))\n\n        resolve({\n          is_exclusion: false,\n          is_valid: res.is_valid,\n        })\n\n      })\n      .catch((err) => {\n\n        if (project.isDev) {\n          console.error(`Can't check license`)\n        }\n\n        resolve({\n          is_exclusion: false,\n          is_valid: true,\n        })\n\n      });\n\n  });\n\n  return v\n\n}","import * as React from 'react'\n\n// reducers\nimport { Reducer, KEYS } from './reducer'\nimport { initialState, StateProps } from './initial'\n\n// configs\nimport checkPackageVersion from '../../configs/utils/npm'\nimport checkLicenseKey from '../../configs/utils/license'\n\n\nconst actions = () => {\n\n  // ** States\n  const [state, dispatch]: [StateProps, any] = React.useReducer(Reducer, initialState)\n\n  // ** Classes\n  const cls = new class {\n\n    get state() {\n      return state\n    }\n\n    dispatch(payload: unknown) {\n      dispatch({\n        type: KEYS.UPDATE,\n        payload,\n      })\n    }\n\n    async checkVersion() {\n      const packageVersion = await checkPackageVersion()\n      this.dispatch({ packageVersion })\n    }\n\n    async checkApiKey() {\n      const licenseData = await checkLicenseKey()\n      // alert(JSON.stringify(licenseData, null, 2))\n      this.dispatch({ licenseData })\n    }\n\n    get isLicenseValid() {\n      if (!state.licenseData) return false\n      return state.licenseData?.is_valid\n    }\n\n    get isLicenseActivated() {\n      if (!state.licenseData) return false\n      return state.licenseData?.is_valid || state.licenseData?.is_exclusion\n    }\n\n    hidePreloader() {\n      this.dispatch({ showPreloader: false })\n    }\n  }\n\n  return cls\n}\n\nexport interface ActionProps {\n  state: StateProps\n  checkVersion: () => void\n  checkApiKey: () => void\n  isLicenseValid: boolean\n  isLicenseActivated: boolean\n  hidePreloader: () => void\n}\n\nexport default actions\n","import * as React from 'react'\n\n// classes\nimport actions from './actions'\nimport { ActionProps } from './actions'\n\nconst Context = React.createContext({} as ActionProps)\nexport const useGlobalContext = () => React.useContext(Context)\n\ninterface Props {\n  children: JSX.Element\n}\n\nconst Provider = (props: Props) => {\n  const payload: any = actions()\n\n  return <Context.Provider value={payload}>{props.children}</Context.Provider>\n}\n\nexport default Provider\n","import { StateProps } from './initial'\n\nconst KEYS = {\n  UPDATE: 'UPDATE',\n  UPDATE_PS_CONFIG_KEY: 'UPDATE_PS_CONFIG_KEY',\n}\n\nfunction Reducer(state: StateProps, action: any) {\n  const { type, payload: anValue } = action\n\n  if (type === KEYS.UPDATE) {\n    return { ...state, ...anValue }\n\n  } else if (type === KEYS.UPDATE_PS_CONFIG_KEY) {\n    state.playerConfig.psConfig = {\n      ...state.playerConfig.psConfig,\n      ...anValue,\n    }\n\n    // alert(JSON.stringify(state, null, 2))\n    return {\n      ...state,\n    }\n  }\n\n  return state\n}\n\nexport { Reducer, KEYS }\n","import { WebrtcStatus, StreamStatus } from './types'\n\n// types\nimport { PlayerConfigProps } from '../../snippets/Player/types'\n\nexport interface StateProps {\n  playerConfig: PlayerConfigProps | null\n  webrtcStatus: WebrtcStatus\n  webrtcMessage: string | boolean\n  streamStatus: StreamStatus\n  streamMessage: string | boolean\n  freezeFrame: boolean\n}\n\nexport const initialState: StateProps = {\n  playerConfig: null,\n  webrtcStatus: null,\n  webrtcMessage: false,\n  streamStatus: null,\n  streamMessage: false,\n  freezeFrame: false,\n}","import * as React from 'react'\n\n// reducers\nimport { Reducer, KEYS } from './reducer'\nimport { initialState, StateProps } from './initial'\n\n// types\nimport { WebrtcStatus, StreamStatus, CommandItem, ResponsItem } from './types'\nimport { PlayerConfigProps } from '../../snippets/Player/types'\nimport type { IApplication } from '../../globalTypes'\n\n\nconst actions = () => {\n\n  // states\n  const [state, dispatch]: [StateProps, any] = React.useReducer(Reducer, initialState)\n  const [commandsList, setCommandsList] = React.useState<CommandItem[]>([])\n  const [responsesList, setResponsesList] = React.useState<ResponsItem[]>([])\n\n  // refs\n  const refStreamApp = React.useRef(null)\n\n  // classes\n  const cls = new class {\n\n    get state() {\n      return state\n    }\n\n    get commandsList() {\n      return commandsList\n    }\n\n    get responsesList() {\n      return responsesList\n    }\n\n    dispatch(payload: unknown) {\n      dispatch({\n        type: KEYS.UPDATE,\n        payload,\n      })\n    }\n\n    dispatchPsConfig(payload: unknown) {\n      dispatch({\n        type: KEYS.UPDATE_PS_CONFIG_KEY,\n        payload,\n      })\n    }\n\n    get streamApp() {\n      return refStreamApp.current\n    }\n\n    setRefStream(app: IApplication) {\n      refStreamApp.current = app\n    }\n\n    get isStreamActive() {\n      return state.streamStatus === 'play'\n    }\n\n    get isWebrtcConnected() {\n      return state.webrtcStatus === 'connected'\n    }\n\n    get isWebrtcError() {\n      return ['failed', 'disconnected', 'disconnectedRestart'].includes(state.webrtcStatus)\n    }\n\n    get isStreamError() {\n      return ['error', 'rejected'].includes(state.streamStatus)\n    }\n\n    setWebrtcStatus(status: WebrtcStatus, message: string | boolean = false) {\n      this.dispatch({ webrtcStatus: status, webrtcMessage: message })\n    }\n\n    setStreamStatus(status: WebrtcStatus, message: string | boolean = false) {\n      this.dispatch({ streamStatus: status, streamMessage: message })\n    }\n\n    setFreezeFrame(freezeFrame: boolean) {\n      this.dispatch({ freezeFrame })\n    }\n\n    // Commands list history for debug\n    addCommand(payload: CommandItem) {\n      setCommandsList(c => ([payload, ...c].slice(0, 100)))\n    }\n\n    // Responses list history for debug\n    addResponse(payload: ResponsItem) {\n      setResponsesList(c => ([payload, ...c].slice(0, 100)))\n\n      console.error('- '.repeat(30))\n      console.error('RESPONSE:', payload)\n    }\n\n    updateConfig(playerConfig: PlayerConfigProps) {\n      this.dispatch({ playerConfig })\n    }\n\n    setMuted(muted: boolean) {\n      this.dispatchPsConfig({ startMuted: muted })\n    }\n\n  }\n\n  return cls\n}\n\nexport interface ActionProps {\n  state: StateProps,\n  commandsList: CommandItem[]\n  responsesList: ResponsItem[]\n  streamApp: IApplication | null\n  setRefStream: (app: IApplication) => void\n  isStreamActive: boolean\n  isWebrtcConnected: boolean\n  isWebrtcError: boolean\n  isStreamError: boolean\n  setWebrtcStatus: (status: WebrtcStatus, message?: string | boolean) => void\n  setStreamStatus: (status: StreamStatus, message?: string | boolean) => void\n  setFreezeFrame: (freezeFrame: boolean) => void\n  addCommand: (payload: CommandItem) => void\n  addResponse: (payload: ResponsItem) => void\n  updateConfig: (config: PlayerConfigProps) => void\n  setMuted: (muted: boolean) => void\n}\n\nexport default actions\n","import * as React from 'react'\n\n// classes\nimport actions from './actions'\nimport { ActionProps } from './actions'\n\nconst Context = React.createContext({} as ActionProps)\nexport const useStreamContext = () => React.useContext(Context)\n\ninterface Props {\n  children: JSX.Element\n}\n\nconst Provider = (props: Props) => {\n  const payload: any = actions()\n\n  return <Context.Provider value={payload}>{props.children}</Context.Provider>\n}\n\nexport default Provider\n","/* Usage\n\n***** wrapper\n// Context\nimport ContextProvider from 'src/@core/context';\n\nreturn (\n  <ContextProvider>\n    {children...}\n  </ContextProvider>\n)\n\n***** injection\n// context\nimport { useGlobalContext } from 'src/context';\n\nconst globalContext = useGlobalContext() //as IGlobalProps\n\n*/\n\nimport React from 'react'\n\nimport GlobalProvider, { useGlobalContext } from './useGlobalContext'\nimport StreamContext, { useStreamContext } from './useStreamContext'\n\nfunction ContextProvider(props: any) {\n  return (\n    <GlobalProvider>\n      <StreamContext>\n        {props.children}\n      </StreamContext>\n    </GlobalProvider>\n  )\n}\n\nexport { useGlobalContext, useStreamContext }\nexport default ContextProvider\n","import * as React from 'react'\n\n// libs\nimport { JSONTree } from 'react-json-tree';\n\ninterface Props {\n  data: any;\n  expanded?: boolean\n}\n\nconst JsonView = (props: Props) => (\n  <JSONTree\n    invertTheme={false}\n    shouldExpandNodeInitially={() => props.expanded ? true : false}\n    theme={{\n      extend: theme,\n      // underline keys for literal values\n      valueLabel: {\n        // textDecoration: 'underline',\n      },\n    }}\n    data={props.data} />\n);\n\nconst theme = {\n  scheme: 'monokai',\n  author: 'wimer hazenberg (http://www.monokai.nl)',\n  // base00: 'var(--rs-bg-overlay)',\n  base00: 'transparent',\n  base01: '#383830',\n  base02: '#49483e',\n  base03: '#75715e',\n  base04: '#a59f85',\n  base05: '#f8f8f2',\n  base06: '#f5f4f1',\n  base07: '#f9f8f5',\n  base08: '#f92672',\n  base09: '#fd971f',\n  base0A: '#f4bf75',\n  base0B: '#a6e22e',\n  base0C: '#a1efe4',\n  base0D: '#66d9ef',\n  base0E: '#ae81ff',\n  base0F: '#cc6633',\n};\n\nexport default JsonView","import * as React from 'react'\n\n// context\nimport { useStreamContext } from \"../../context\"\n\n// rsuite\nimport { useToaster } from 'rsuite'\n\n// libs\nimport moment from 'moment'\nimport uuid from 'short-uuid'\n\n// types\nimport { CommandItem } from '../../context/useStreamContext/types'\nimport { ToasterOptions } from './types'\n\n// rsuite\nimport { Notification } from 'rsuite'\n\n// components\nimport JsonView from '../../components/JsonView'\n\n\nexport default function useSave() {\n\n  // context\n  const streamContext = useStreamContext()\n\n  // hooks\n  const toaster = useToaster();\n\n  const cls = new class {\n    add(type: 'ui' | 'sys', payload: object, options?: ToasterOptions) {\n\n      // Save to context store\n      const newPayload: CommandItem = {\n        type,\n        uuid: uuid.generate(),\n        date: moment.utc().format(),\n        payload,\n      }\n\n      streamContext.addCommand(newPayload)\n\n      // Check if debug mode enabled or parament specified in emit\n      const showNotification = (() => {\n        const { debugMode } = streamContext.state.playerConfig\n        if (debugMode === 'off') {\n          return false\n        }\n\n        if (['on', 'commands'].includes(debugMode)) {\n          return options?.debug || true\n        }\n\n        return false\n\n      })()\n\n      if (showNotification) {\n        toaster.push((\n          <Notification type=\"success\" header=\"Command\" closable>\n            <JsonView data={newPayload} expanded />\n          </Notification>\n        ), {\n          placement: options?.placement || 'bottomEnd',\n          duration: options?.duration || 1000 * 2,\n        })\n      }\n    }\n  }\n\n  return cls\n}","// types\nimport { ToasterOptions } from './types'\n\n// context\nimport { useStreamContext } from '../../context'\n\n// hooks\nimport useSave from './useSave'\n\n\ndeclare global {\n  interface Window {\n    [key: string]: any\n  }\n}\n\n\nexport default function useStreamActions() {\n\n  // context\n  const streamContext = useStreamContext()\n\n  // hooks\n  const save = useSave()\n\n  const cls = new class {\n\n    get nodeVideo() {\n      return <HTMLVideoElement>document.getElementById('streamingVideo')\n    }\n\n    play() {\n      window.player.stream?.play()\n    }\n\n    reconnect() {\n      window.player.stream?.reconnect()\n    }\n\n    disconnect() {\n      window.player.stream?.disconnect()\n    }\n\n    emitUi(payload: object, options?: ToasterOptions) {\n      save.add('ui', payload, options)\n\n      if (!streamContext.isStreamActive) {\n        console.error('Stream is not active. Can not emit UI interaction.')\n        return\n      }\n\n      if (window.metaeditor) {\n        window.metaeditor.emitUIInteraction(payload)\n      }\n    }\n\n    emitSys(payload: object, options?: ToasterOptions) {\n      save.add('sys', payload, options)\n\n      if (!streamContext.isStreamActive) {\n        console.error('Stream is not active. Can not emit system command.')\n        return\n      }\n\n      if (window.metaeditor) {\n        window.metaeditor.emitCommand(payload)\n      }\n    }\n\n    resetResolution() {\n      const width = window.innerWidth || document.documentElement.clientWidth\n        || document.body.clientWidth;\n      const height = window.innerHeight || document.documentElement.clientHeight\n        || document.body.clientHeight;\n\n      const payload = ({ 'Resolution.Width': width, 'Resolution.Height': height })\n      this.emitSys(payload, { debug: false })\n    }\n\n    switchMuted() {\n      if (this.nodeVideo) {\n        const muted = !streamContext.state.playerConfig.psConfig.startMuted\n        this.nodeVideo.muted = muted\n        streamContext.setMuted(muted)\n      }\n    }\n  }\n\n  return cls\n\n}\n\n","\n// context\nimport { useGlobalContext, useStreamContext } from \"../context\"\n\n// hooks\nimport useStreamActions from '../hooks.stream/useStreamActions'\n\n\nexport default function usePreloader() {\n\n  // context\n  const globalContext = useGlobalContext()\n  const streamContext = useStreamContext()\n\n  // hooks\n  const streamActions = useStreamActions()\n\n  const cls = new class {\n\n    get isWebrtcConnected() {\n      return streamContext.isWebrtcConnected\n    }\n\n    get webrtcErrorHeader() {\n      if (streamContext.isWebrtcError) {\n        return streamContext.state.webrtcMessage\n      }\n      return null\n    }\n\n    get connectionHeader() {\n      return streamContext.state.webrtcMessage || streamContext.state.webrtcStatus\n    }\n\n    connect() {\n      streamActions.reconnect()\n    }\n\n    hide() {\n      globalContext.hidePreloader()\n    }\n\n  }\n\n  return cls\n}","import { useEffect, useRef } from 'react'\n\nexport default function useEventListener(element: any, eventName: string, handler: any) {\n  // Create a ref that stores handler\n  const savedHandler = useRef<any>(null);\n\n  // Update ref.current value if handler changes.\n  // This allows our effect below to always get latest handler ...\n  // ... without us needing to pass it in effect deps array ...\n  // ... and potentially cause effect to re-run every render.\n\n  useEffect(() => {\n    if (handler) {\n      savedHandler.current = handler;\n    }\n\n  }, [handler]);\n\n  useEffect(\n    () => {\n      // Make sure element supports addEventListener\n      // On\n      const isSupported = element && element.addEventListener;\n      if (!isSupported) return;\n      // Create event listener that calls handler function stored in ref\n      const eventListener = (event: any) => savedHandler.current(event);\n      // Add event listener\n      element.addEventListener(eventName, eventListener);\n      // Remove event listener on cleanup\n      return () => {\n        element.removeEventListener(eventName, eventListener);\n      };\n    },\n    [eventName, element] // Re-run if eventName or element changes\n  );\n}","import * as React from 'react'\n\n// hooks\nimport useEventListener from '../hooks/useEventListener'\n\n// context\nimport { useStreamContext } from \"../context\"\n\n\nexport default function useStreamEvents() {\n\n  // context\n  const streamContext = useStreamContext()\n\n  const player = typeof window !== 'undefined' && window.player ? window.player : null\n  const stream = player?.stream\n\n  /***\n   * webRtc\n   */\n\n  useEventListener(stream, 'webRtcSdp', () => {\n    streamContext.setWebrtcStatus('connection', 'Connection negotiated')\n  })\n\n  useEventListener(stream, 'webRtcAutoConnect', () => {\n    streamContext.setWebrtcStatus('autoConnect', 'Auto Connecting Now')\n  })\n\n  useEventListener(stream, 'webRtcConnecting', () => {\n    streamContext.setWebrtcStatus('connecting', 'Starting connection to server, please wait')\n  })\n\n  useEventListener(stream, 'webRtcConnected', () => {\n    streamContext.setWebrtcStatus('connected', 'WebRTC connected, waiting for video')\n  })\n\n  useEventListener(stream, 'webRtcFailed', () => {\n    streamContext.setWebrtcStatus('failed', 'Unable to setup video')\n  })\n\n  useEventListener(stream, 'webRtcDisconnected',\n    ({ data: { eventString, showActionOrErrorOnDisconnect } }: { data: { eventString: string, showActionOrErrorOnDisconnect: boolean } }) => {\n      if (showActionOrErrorOnDisconnect == false) {\n        streamContext.setWebrtcStatus('disconnected', eventString)\n      } else {\n        streamContext.setWebrtcStatus('disconnectedRestart', eventString)\n      }\n    })\n\n  /***\n   * streamer\n   */\n\n  useEventListener(stream, 'videoInitialized', () => {\n    streamContext.setStreamStatus('initialized')\n  })\n\n  useEventListener(stream, 'streamLoading', () => {\n    streamContext.setStreamStatus('loading', 'Loading Stream')\n  })\n\n  useEventListener(stream, 'playStreamError',\n    ({ data: { message } }: { data: { message: string } }) => {\n      streamContext.setStreamStatus('error', message)\n    })\n\n  // Doesnt work for some reason\n  // useEventListener(stream, 'playStream', () => {\n  //   streamContext.setStreamStatus('play')\n  // })\n\n  useEventListener(stream?.videoElementParent, 'click', () => {\n    if (streamContext.state.webrtcStatus == 'connected') {\n      if (streamContext.state.streamStatus !== 'play') {\n        streamContext.setStreamStatus('play')\n      }\n    }\n  })\n\n  useEventListener(stream, 'playStreamRejected',\n    ({ data: { reason } }: { data: { reason: string } }) => {\n      streamContext.setStreamStatus('rejected', reason)\n    })\n\n  useEventListener(stream, 'loadFreezeFrame',\n    ({ data: { shouldShowPlayOverlay } }: { data: { shouldShowPlayOverlay: boolean } }) => {\n      streamContext.setFreezeFrame(shouldShowPlayOverlay)\n    })\n\n\n  // this.stream.addEventListener(\n  //   'statsReceived',\n  //   ({ data: { aggregatedStats } }) =>\n  //     this.onStatsReceived(aggregatedStats)\n  // );\n  // this.stream.addEventListener(\n  //   'latencyTestResult',\n  //   ({ data: { latencyTimings } }) =>\n  //     this.onLatencyTestResults(latencyTimings)\n  // );\n  // this.stream.addEventListener(\n  //   'streamerListMessage',\n  //   ({ data: { messageStreamerList, autoSelectedStreamerId } }) =>\n  //     this.handleStreamerListMessage(messageStreamerList, autoSelectedStreamerId)\n  // );\n  // this.stream.addEventListener(\n  //   'settingsChanged',\n  //   (event) => this.configUI.onSettingsChanged(event)\n  // );\n\n\n\n}","/* Usage\n\n// hooks\nimport useWindowSize from 'src/hooks/useWindowSize'\n\nfunction App() {\n  const windowSize = useWindowSize();\n\n  return (\n    <div>\n      {windowSize.width}px / {windowSize.height}px\n    </div>\n  );\n}\n*/\n\nimport {\n  useState,\n  useEffect\n} from 'react';\n\n// Hook\nexport default function useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState<{\n    width: number\n    height: number\n  }>({\n    width: 0,\n    height: 0,\n  });\n\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n\n      // Set for css\n      const doc = document.documentElement\n      doc.style.setProperty(\"--window-width\", window.innerWidth + 'px');\n      doc.style.setProperty(\"--window-height\", window.innerHeight + 'px');\n\n    }\n\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n\n\n\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []); // Empty array ensures that effect is only run on mount\n\n  const { width, height } = windowSize\n  return { width, height }\n}\n","import * as React from 'react'\n\n// context\nimport { useStreamContext } from \"../../context\"\n\n// rsuite\nimport { useToaster } from 'rsuite'\n\n// libs\nimport moment from 'moment'\n\n// types\nimport { ResponsItem } from '../../context/useStreamContext/types'\n\n// rsuite\nimport { Notification } from 'rsuite'\n\n// components\nimport JsonView from '../../components/JsonView'\n\n\nexport default function useResponseSave() {\n\n  // context\n  const streamContext = useStreamContext()\n\n  // hooks\n  const toaster = useToaster();\n\n  const cls = new class {\n\n    handler(data: object) {\n      this.add(data)\n\n      const event = new CustomEvent(\"ue_response\", {\n        detail: data\n      });\n\n      document.dispatchEvent(event);\n\n      // Example of how to use the event\n      // document.addEventListener('ue_response', ({ detail }: any) => {\n      //   console.log('new event', detail);\n      // });\n    }\n\n    add(payload: object) {\n\n      // Save to context store\n      const newPayload: ResponsItem = {\n        date: moment.utc().format(),\n        payload,\n      }\n\n      streamContext.addResponse(newPayload)\n\n      // Check if debug mode enabled or parament specified in emit\n      const showNotification = (() => {\n        const { debugMode } = streamContext.state.playerConfig\n        if (debugMode === 'off') {\n          return false\n        }\n\n        if (['on', 'responses'].includes(debugMode)) {\n          return true\n        }\n\n        return false\n\n      })()\n\n      if (showNotification) {\n        toaster.push((\n          <Notification type=\"info\" header=\"Response\" closable>\n            <JsonView data={newPayload} expanded />\n          </Notification>\n        ), {\n          placement: 'bottomEnd',\n          duration: 1000 * 3,\n        })\n      }\n    }\n  }\n\n  return cls\n}","import * as React from 'react'\n\n// hooks\nimport useResponseSave from './useResponseSave'\n\nexport default function useStreamResponses() {\n\n  // hooks\n  const responseSave = useResponseSave()\n\n  React.useEffect(() => {\n\n    if (window?.metaeditor) {\n      window.metaeditor.emitResponse.addResponseEventListener('handle_responses', responseSave.handler)\n    }\n\n    return () => {\n\n      if (window?.metaeditor) {\n        window.metaeditor.emitResponse.removeResponseEventListener('handle_responses')\n      }\n\n    }\n  }, [window?.metaeditor])\n\n}","// configs\nimport project from \"../project\"\n\n// global\nlet watermarkTimer: any\n\nconst watermark = new class {\n\n  get node() {\n    const xpath = `//div[text()='${project.name}']`;\n    const matchingElement = document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);\n    return (matchingElement.singleNodeValue as any)\n  }\n\n  start() {\n    clearInterval(watermarkTimer)\n    watermarkTimer = setInterval(() => {\n      watermark.injector()\n    }, 100)\n  }\n\n  stop() {\n    clearInterval(watermarkTimer)\n    this.node?.remove()\n  }\n\n  injector() {\n\n    if (!this.node) {\n      const dc = document.createElement(\"div\");\n\n      dc.addEventListener('mouseover', () => {\n        dc.style.opacity = '1';\n      })\n      dc.addEventListener('mouseleave', () => {\n        dc.style.opacity = '.7';\n      })\n\n      dc.innerText = project.name;\n      dc.onclick = (event) => {\n        event.preventDefault()\n        event.stopPropagation()\n        window.open(project.urls.buy)\n      }\n\n      dc.setAttribute(\n        'style',\n        `\n          text-shadow: 1px 1px 1px #000000;\n          text-transform: uppercase;\n          opacity: .7 !important;\n          display: block !important;\n          visibility: visible !important;\n          position: fixed !important;\n          bottom: 0.25rem !important;\n          right: 1rem !important;\n          z-index: 999999999999999999 !important;\n          color: #fff !important;\n          font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;\n          font-size: .55rem !important;\n          line-height: 100% !important;\n          letter-spacing: 1px;\n          cursor: pointer !important;\n          transition: background-color 300ms linear;\n          user-select: none !important;\n        `,\n\n        // transform: rotate(90deg);\n        //   background-color: rgba(0, 0, 0, .2);\n        //   border: solid 1px rgba(255,255,255, .1) !important;\n        //   padding: 4px 10px !important;\n        //   border-radius: 100px !important;\n      );\n\n      document.body.appendChild(dc);\n\n    }\n  }\n}\n\nexport default watermark","\nimport * as React from 'react'\n\n// context\nimport { useGlobalContext, useStreamContext } from '../context';\n\n// configs\nimport watermark from '../configs/utils/watermark'\n\n\nexport default function useWatermark() {\n\n  // context\n  const globalContext = useGlobalContext()\n  const streamContext = useStreamContext()\n\n  const licenseData = globalContext.state.licenseData\n  const configLoaded = streamContext.state.playerConfig ? true : false\n\n  React.useEffect(() => {\n\n    return () => {\n      watermark.stop()\n    }\n  }, [])\n\n  React.useEffect(() => {\n\n    if (globalContext.isLicenseActivated) {\n      watermark.stop()\n    } else {\n      watermark.start()\n    }\n\n  }, [licenseData])\n\n  React.useEffect(() => {\n    if (configLoaded) {\n      globalContext.checkApiKey()\n    }\n  }, [configLoaded])\n\n}","import * as React from 'react'\n\n// libs\nimport { createUseStyles } from \"react-jss\";\n\n// context\nimport { useGlobalContext } from \"../../context\"\n\n// hooks\nimport usePreloader from '../../hooks.player/usePreloader'\n\n// rsiute\nimport { Button } from 'rsuite';\nimport SpinnerIcon from '@rsuite/icons/legacy/Spinner';\nimport PlayOutlineIcon from '@rsuite/icons/PlayOutline';\n\n\nconst useStyles = createUseStyles({\n  rootDiv: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n\n    zIndex: 10,\n\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    pointerEvents: 'none',\n    padding: '3rem',\n    '& > *': {\n      pointerEvents: 'all'\n    }\n  },\n  webrtcError: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    '& > h5': {\n      textAlign: 'center',\n      marginBottom: '1rem',\n    }\n  },\n  preloader: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    '& > small': {\n      textAlign: 'center',\n      margin: '1rem 0 .5rem',\n      cursor: 'default',\n      opacity: .5,\n    }\n  }\n})\n\nconst Preloader = () => {\n\n  // styles\n  const styles = useStyles();\n\n  // hooks\n  const preloader = usePreloader()\n\n  if (preloader.isWebrtcConnected) {\n    return (\n      <PlayOutlineIcon\n        onClick={(event) => {\n          // event.preventDefault()\n          // event.stopPropagation()\n        }}\n        style={{\n          pointerEvents: 'none',\n          color: '#fff',\n          fontSize: '10em',\n          cursor: 'pointer',\n        }} />\n    )\n  }\n\n  return (\n    <div className={styles.preloader}>\n      <SpinnerIcon pulse style={{\n        color: '#fff',\n        fontSize: '3em'\n      }} />\n\n      <small>\n        {preloader.connectionHeader}\n      </small>\n    </div>\n  )\n}\n\nconst WebrtcError = () => {\n\n  // styles\n  const styles = useStyles();\n\n  // hooks\n  const preloader = usePreloader()\n\n  return (\n    <div className={styles.webrtcError}>\n      <h5>\n        {preloader.webrtcErrorHeader}\n      </h5>\n      <Button\n        onClick={preloader.connect}\n        appearance='ghost'>\n        Restart\n      </Button>\n    </div>\n  )\n}\n\nexport default function PreloaderDialog() {\n\n  // styles\n  const styles = useStyles();\n\n  // context\n  const globalContext = useGlobalContext()\n\n  // hooks\n  const preloader = usePreloader()\n\n  // render\n  if (!globalContext.state.showPreloader) return null\n  if (preloader.isWebrtcConnected) return null\n\n  return (\n    <div className={styles.rootDiv}>\n      {preloader.webrtcErrorHeader ? (\n        <WebrtcError />\n      ) : (\n        <Preloader />\n      )}\n    </div>\n  )\n}","import { useEffect, useState } from 'react'\n\n// https://usehooks-ts.com/react-hook/use-media-query\n\nconst useMedia = () => {\n  const smUp = useMediaQuery('(min-width: 768px)')\n  const smDown = useMediaQuery('(max-width: 768px)')\n\n  return {\n    up: {\n      sm: smUp,\n    },\n    down: {\n      sm: smDown,\n    },\n  }\n}\n\nfunction useMediaQuery(query: string): boolean {\n  const getMatches = (query: string): boolean => {\n    // Prevents SSR issues\n    if (typeof window !== 'undefined') {\n      return window.matchMedia(query).matches\n    }\n    return false\n  }\n\n  const [matches, setMatches] = useState<boolean>(getMatches(query))\n\n  function handleChange() {\n    setMatches(getMatches(query))\n  }\n\n  useEffect(() => {\n    const matchMedia = window.matchMedia(query)\n\n    // Triggered at the first client-side load and if query changes\n    handleChange()\n\n    // Listen matchMedia\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange)\n    } else {\n      matchMedia.addEventListener('change', handleChange)\n    }\n\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange)\n      } else {\n        matchMedia.removeEventListener('change', handleChange)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [query])\n\n  return matches\n}\n\nexport default useMedia\n","import * as React from 'react'\n\n// context\nimport { useGlobalContext } from '../../../context';\n\n// hooks\nimport useStreamActions from '../../../hooks.stream/useStreamActions';\nimport useMedia from '../../../hooks/useMedia'\n\n// configs\nimport project from '../../../configs/project';\n\n// rsuite\nimport { Navbar, Nav, Button } from 'rsuite';\nimport CheckRoundIcon from '@rsuite/icons/CheckRound';\n\n\nexport default function Appbar() {\n\n  // context\n  const globalContext = useGlobalContext()\n\n  // hooks\n  const media = useMedia()\n  const streamActions = useStreamActions()\n\n  // render\n  const isLicenseValid = globalContext.isLicenseValid\n\n  const toolsMenu = [\n    {\n      title: 'Restart stream',\n      onClick: () => {\n        streamActions.reconnect()\n      }\n    },\n    {\n      title: 'Close stream',\n      onClick: () => {\n        streamActions.disconnect()\n      }\n    },\n    {\n      title: 'Reset resolution',\n      onClick: () => {\n        streamActions.resetResolution()\n      }\n    },\n  ]\n\n  const helpMenu = (() => {\n    let res = [\n      {\n        title: 'Online Player',\n        href: project.urls.onlinePlayer,\n      },\n      {\n        title: 'Signaling Server',\n        href: project.urls.signalingServer\n      },\n      {\n        title: 'Documentation',\n        href: project.urls.docs\n      },\n      {\n        title: 'Support',\n        href: project.urls.support,\n      }\n    ]\n\n    if (media.down.sm && !isLicenseValid) {\n      res = [\n        {\n          title: project.name + ' Pro',\n          href: project.urls.buy,\n        },\n        ...res,\n      ]\n    }\n\n    return res\n  })()\n\n  return (\n    <Navbar appearance=\"subtle\">\n      <Navbar.Brand as=\"a\" href={project.urls.main} target=\"_blank\">\n        {project.name} {isLicenseValid && 'Pro'}\n      </Navbar.Brand>\n      <Nav onSelect={() => { }} activeKey={undefined}>\n\n        {/* <Nav.Item>Project</Nav.Item> */}\n\n        <Nav.Menu title=\"Tools\">\n          {toolsMenu.map((item, index) => {\n            return (\n              <Nav.Item key={index} onClick={item.onClick}>\n                {item.title}\n              </Nav.Item>\n            )\n          })}\n        </Nav.Menu>\n\n        <Nav.Menu title=\"Help\">\n          {helpMenu.map((item, index) => (\n            <Nav.Item key={index} as=\"a\" href={item.href} target=\"_blank\">\n              {item.title}\n            </Nav.Item>\n          ))}\n        </Nav.Menu>\n\n      </Nav>\n\n      {(media.up.sm && !isLicenseValid) && (\n        <Nav pullRight>\n          <Nav.Item as=\"a\" href={project.urls.buy} target=\"_blank\">\n            <Button color=\"green\" appearance=\"primary\" startIcon={<CheckRoundIcon />}>\n              Buy Pro\n            </Button>\n          </Nav.Item>\n        </Nav>\n      )}\n    </Navbar>\n\n  )\n}","/**\n * Usage\n * \n * \nimport CustomDrawer from 'src/components/Drawer';\n\ninterface Props {}\nconst DrawerMenu = React.forwardRef((props: Props, ref: any) => {\n\n  const refDrawer = React.useRef<any>(null);\n\n  React.useImperativeHandle(ref, () => ({\n    open: () => {\n      refDrawer?.current.open()\n    },\n    close: () => {\n      refDrawer?.current.close()\n    }\n  }))\n\n  return (\n    <CustomDrawer\n      contentPadding={0}\n      placement='left'\n      title=\"Drawer\"\n      ref={refDrawer}>\n      <div style={{\n        height: '100%'\n      }}>\n        Content\n      </div>\n    </CustomDrawer>\n  );\n})\n */\n\nimport * as React from 'react';\nimport { useState } from 'react';\n\n// rsuite\nimport { Drawer, DrawerProps } from 'rsuite';\n\n// hooks\nimport useMedia from '../../hooks/useMedia';\n\n\ninterface Props extends DrawerProps {\n  title: string\n  children: React.ReactNode\n  // placement?: 'left' | 'right' | 'top' | 'bottom'\n  // size?: 'xs' | 'sm' | 'md' | 'lg' | 'full'\n  contentPadding?: number\n  onClose?: () => void\n}\n\nconst CustomDrawer = React.forwardRef(({ title, children, contentPadding, onClose, ...props }: Props, ref: any) => {\n\n  const media = useMedia()\n\n  const [open, setOpen] = useState(false);\n\n  /**\n   * The component instance will be extended\n   * with whatever you return from the callback passed\n   * as the second argument\n   */\n  React.useImperativeHandle(ref, () => ({\n    open: () => {\n      setOpen(true)\n    },\n    close: () => {\n      setOpen(false)\n    }\n  }))\n\n  // Render\n  const drawerSize = media.up.sm ? props.size || 'xs' : 'full'\n\n  return (\n    <>\n      {/* <Button onClick={() => setOpenWithHeader(true)}>Open with header</Button> */}\n\n      <Drawer\n        {...props}\n        size={drawerSize}\n        open={open}\n        onClose={() => {\n          setOpen(false)\n          if (onClose) {\n            onClose()\n          }\n        }}>\n        <Drawer.Header>\n          <Drawer.Title>\n            {title}\n          </Drawer.Title>\n          {/* <Drawer.Actions>\n            <Button onClick={() => setOpenWithHeader(false)}>Cancel</Button>\n            <Button onClick={() => setOpenWithHeader(false)} appearance=\"primary\">\n              Confirm\n            </Button>\n          </Drawer.Actions> */}\n        </Drawer.Header>\n        <Drawer.Body style={{ padding: contentPadding }}>\n          {open && children}\n        </Drawer.Body>\n      </Drawer>\n    </>\n  );\n});\n\n\nexport default CustomDrawer;","import * as React from 'react'\n\n// context\nimport { useStreamContext } from '../../../context';\n\n// hooks\nimport useStreamActions from '../../../hooks.stream/useStreamActions'\nimport useResponseSave from '../../../hooks.stream/useStreamResponses/useResponseSave'\n\n// rsuite\nimport { Button, Divider, Stack } from 'rsuite';\n\n// components\nimport JsonView from '../../../components/JsonView';\n\n\nexport default function DrawerContainer() {\n\n  // context\n  const streamContext = useStreamContext()\n\n  // hooks\n  const streamActions = useStreamActions()\n  const responseSave = useResponseSave()\n\n  return (\n    <>\n\n      <div>\n\n        <h6>Current config</h6>\n        <JsonView data={streamContext.state} expanded />\n\n        <Divider />\n\n        <h6>Commands history</h6>\n        <JsonView data={streamContext.commandsList} />\n\n        <Divider />\n\n        <h6>Responses history</h6>\n        <JsonView data={streamContext.responsesList} />\n\n        <Divider />\n\n        {/* <Button\n          onClick={() => {\n            streamActions.emitUi({ test: 'demo' })\n          }}>\n          Send data\n        </Button> */}\n\n        <Stack direction='column' spacing={5} alignItems='flex-start'>\n          <Button\n            onClick={() => streamActions.resetResolution()}>\n            Reset resolution\n          </Button>\n\n          <Button\n            onClick={() => {\n              responseSave.handler({ demo: true })\n            }}>\n            Test response\n          </Button>\n        </Stack>\n      </div>\n    </>\n  )\n}","\nimport * as React from 'react'\n\n// components\nimport CustomDrawer from '../../../components/Drawer';\n\n// blocks\nimport DrawerContainer from './Container'\n\ninterface Props { }\nconst DrawerInfo = React.forwardRef((props: Props, ref: any) => {\n\n  const refDrawer = React.useRef<any>(null);\n\n  React.useImperativeHandle(ref, () => ({\n    open: () => {\n      refDrawer?.current.open()\n    },\n    close: () => {\n      refDrawer?.current.close()\n    }\n  }))\n\n  return (\n    <CustomDrawer\n      backdrop\n      contentPadding={20}\n      placement='right'\n      title=\"Tools Panel\"\n      ref={refDrawer}>\n      <div style={{\n        height: '100%'\n      }}>\n        <DrawerContainer />\n      </div>\n    </CustomDrawer>\n  );\n})\n\nexport default DrawerInfo\n","import * as React from 'react'\n\n// snippets\nimport DrawerInfo from '../Drawers/DrawerInfo'\n\n// rsuite\nimport ToolsIcon from '@rsuite/icons/Tools';\n\n\nexport default function UiButton() {\n\n  // refs\n  const refDrawerInfo = React.useRef(null)\n\n  return (\n    <>\n      <DrawerInfo ref={refDrawerInfo} />\n\n      <button onClick={() => refDrawerInfo.current.open()}>\n        <ToolsIcon style={{\n          fontSize: 24,\n          lineHeight: 0,\n        }} />\n      </button>\n    </>\n\n  )\n}","import * as React from 'react'\n\n// configs\nimport project from '../../configs/project';\n\n// context\nimport { useGlobalContext } from '../../context';\n\n// libs\nimport { createUseStyles } from \"react-jss\";\n\n\n\nconst useStyles = createUseStyles({\n  message: {\n    cursor: 'pointer',\n    backgroundColor: 'var(--rs-message-warning-bg)',\n    color: 'var(--rs-message-warning-text)',\n    padding: '.3rem 1rem',\n    transition: 'background-color .1s linear',\n\n    '&:hover': {\n      backgroundColor: 'var(--rs-orange-800)',\n    }\n  },\n})\n\n\nexport default function PackageUpdate() {\n\n  // context\n  const globalContext = useGlobalContext()\n\n  // styles\n  const styles = useStyles();\n\n  // render\n  const pkg = globalContext.state.packageVersion\n  const needUpdate = pkg.needUpdate\n\n  if (!needUpdate) return null\n\n  return (\n    <div className={styles.message} onClick={() => {\n      window.open(project.package.npmUrl)\n    }}>\n      Update {project.name} from version {pkg.current} to {pkg.latest}\n    </div>\n  )\n}","import * as React from 'react'\n\n// libs\nimport { createUseStyles } from \"react-jss\";\nimport { Portal } from 'react-portal';\n\n// hooks\nimport useResizeObserver from \"use-resize-observer\";\n\n// blocks\nimport Appbar from './Appbar'\nimport UiButton from './UiButton'\nimport PackageUpdate from './PackageUpdate'\n\n\nconst useStyles = createUseStyles({\n  appbar: {\n    position: 'fixed',\n    top: 0,\n    right: 0,\n    left: 0,\n    zIndex: 20,\n    backgroundColor: '#000',\n  },\n})\n\n\ninterface Props {\n  show: boolean\n}\n\nexport default function Toolbar({ show }: Props) {\n\n  // styles\n  const styles = useStyles();\n\n  // refs\n  const { ref, width, height } = useResizeObserver<HTMLDivElement>({\n    box: \"border-box\",\n  });\n\n\n  React.useEffect(() => {\n    if (!height) return\n\n    const doc = document.documentElement\n    doc.style.setProperty(\"--appbar-height\", `${height}px`);\n\n    const el = document.getElementById('controls')\n    const controlsHeight = el.clientHeight\n\n    if (el) {\n      el.style.top = `${height}px`\n      const elConnection = document.getElementById('connection')\n\n      if (elConnection) {\n        elConnection.style.top = `${height + controlsHeight + 20}px`\n        elConnection.style.bottom = 'auto'\n        elConnection.style.left = '2%'\n      }\n    }\n\n  }, [height])\n\n  /***\n   * dom\n   */\n  const nodeUiFeatures = typeof document !== 'undefined' && document.getElementById(\"uiFeatures\")\n  const nodePlayerUI = typeof document !== 'undefined' && document.getElementById('playerUI')\n  const nodeControls = typeof document !== 'undefined' && document.getElementById('controls')\n\n  /***\n   * Show/hide ui features\n   */\n  React.useEffect(() => {\n    if (nodeUiFeatures) {\n      nodeUiFeatures.style.visibility = show ? 'visible' : 'hidden'\n    }\n  }, [show, nodeUiFeatures])\n\n\n  // render\n  if (!show) return null\n  if (!nodePlayerUI) return null\n\n  return (\n    <>\n      <Portal node={nodePlayerUI}>\n        <div className={styles.appbar} ref={ref}>\n          <PackageUpdate />\n          <Appbar />\n        </div>\n      </Portal>\n\n      <Portal node={nodeControls}>\n        <UiButton />\n      </Portal>\n    </>\n  )\n}","import * as React from 'react'\n\n// libs\nimport { createUseStyles } from \"react-jss\";\n\n\nconst useStyles = createUseStyles({\n  containerRoot: {\n    position: 'fixed',\n    // top: 'var(--appbar-height)',\n    top: 0,\n    right: 0,\n    left: 0,\n    bottom: 0,\n    height: 'var(--window-height)',\n    padding: 0,\n    paddingTop: 0,\n    pointerEvents: 'none',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    '& > div': {\n      // flex: 1,\n      '& > *': {\n        pointerEvents: 'all'\n      }\n    }\n  }\n})\n\ninterface Props {\n  children: React.ReactElement\n}\n\nexport default function Container({ children }: Props) {\n\n  // styles\n  const styles = useStyles();\n\n  return (\n    <div className={styles.containerRoot}>\n      <div>\n        {children}\n      </div>\n    </div>\n  )\n}","import * as React from 'react';\n\n// libs\nimport { createUseStyles } from \"react-jss\";\n\n// context\nimport { useGlobalContext, useStreamContext } from '../../context';\n\n// ps\nimport { Config, PixelStreaming, Logger } from 'metaeditor4-ue';\nimport { Application } from 'metaeditor4-ui';\nimport { PixelStreamingApplicationStyle } from 'metaeditor4-ui';\nexport const PixelStreamingApplicationStyles = new PixelStreamingApplicationStyle();\nPixelStreamingApplicationStyles.applyStyleSheet();\n\n// hooks\nimport useWindowSize from '../../hooks/useWindowSize'\nimport useStreamEvents from '../../hooks.stream/useStreamEvents'\nimport useStreamResponses from '../../hooks.stream/useStreamResponses'\nimport useWatermark from '../../hooks.player/useWatermark'\n\n// blocks\nimport Pleloader from './Preloader'\n\n// snippets\nimport Toolbar from '../Toolbar'\nimport Container from '../Container';\n\n// types\nimport { PlayerConfigProps } from './types'\nimport { IApplication } from '../../globalTypes'\n\n\nconst useStyles = createUseStyles({\n  '@global': {\n    'body': {\n      width: '100vw',\n      height: 'var(--window-height)',\n      minHeight: '-webkit-fill-available',\n      overflow: 'hidden',\n    },\n    '#playOverlay': {\n      display: 'none',\n    },\n    '#infoOverlay': {\n      display: 'none',\n    },\n    '#disconnectOverlay': {\n      display: 'none',\n    },\n    \"#errorOverlay\": {\n      display: 'none',\n    },\n    // '#controls': {\n    // },\n    '#uiFeatures': {\n      visibility: 'hidden',\n    },\n\n    // dom clicks\n    '[data-click=\"true\"]': {\n      pointerEvents: 'all',\n    },\n    '[data-click=\"false\"]': {\n      pointerEvents: 'none',\n    },\n  },\n\n  rootDiv: {\n    zIndex: 0,\n    position: 'fixed',\n    top: 0,\n    right: 0,\n    left: 0,\n    bottom: 0,\n    width: '100vw',\n    height: 'var(--window-height)',\n    overflow: 'hidden',\n    userSelect: 'none',\n  },\n})\n\ntype Props = {};\n\nconst PlayerComponent = React.forwardRef<Props, PlayerConfigProps>(({ children, ...props }, ref) => {\n\n  const {\n    showToolbar,\n    psHost,\n  } = props\n\n  // context\n  const globalContext = useGlobalContext()\n  const streamContext = useStreamContext()\n\n  // styles\n  const styles = useStyles();\n\n  // refs\n  const refRoot = React.useRef<any>(null)\n\n  // states\n  const [isReady, setIsReady] = React.useState(false)\n\n  // hooks\n  useWindowSize()\n  useStreamEvents()\n  useStreamResponses()\n  useWatermark()\n\n  /**\n   * Update config\n   */\n  // const cfg = {\n  //   debugMode: props.debugMode,\n  //   showToolbar: props.showToolbar,\n  //   psHost: props.psHost,\n  //   psConfig: props.psConfig,\n  // }\n  // React.useEffect(() => streamContext.updateConfig(cfg), [cfg])\n\n  React.useEffect(() => {\n\n    // Example of how to set the logger level\n    Logger.SetLoggerVerbosity(0);\n\n    // Check if already initialized\n    if (isReady) return\n    setIsReady(true)\n\n    // Check npm version\n    if (props.showToolbar) {\n      globalContext.checkVersion()\n    }\n\n    init()\n\n  }, [])\n\n\n  const init = () => {\n\n    // Update config\n    streamContext.updateConfig(props)\n\n    const initialSettings = {\n      AutoPlayVideo: false || props.psConfig.autoPlay,\n      AutoConnect: true || props.psConfig.autoConnect,\n      ss: psHost,\n      StartVideoMuted: true || props.psConfig.startMuted,\n      HoveringMouse: true || props.psConfig.hoveringMouse,\n      FakeMouseWithTouches: true || props.psConfig.fakeMouseWithTouches,\n      MatchViewportRes: true || props.psConfig.matchViewportRes,\n    }\n\n    // Create a config object\n    const config = new Config({\n      useUrlParams: true,\n      initialSettings,\n    });\n\n    // Create a Native DOM delegate instance that implements the Delegate interface class\n    const stream = new PixelStreaming(config);\n    const application: IApplication = new Application({ stream });\n\n    if (refRoot.current && !refRoot.current.textContent) {\n\n      // set access to internal methods\n      streamContext.setRefStream(application)\n      window.player = application\n\n      refRoot.current!.appendChild(application.rootElement)\n\n      if (typeof props.onLoad === 'function') {\n        props.onLoad()\n      }\n    }\n\n  }\n\n  React.useImperativeHandle(ref, () => ({\n    init,\n  }))\n\n  return (\n    <div>\n\n      <Pleloader />\n\n      <Toolbar show={showToolbar} />\n      <div ref={refRoot} className={styles.rootDiv} />\n      {children ? (<Container>{children}</Container>) : ''}\n    </div>\n  );\n})\n\n\nexport default PlayerComponent","import * as React from 'react';\n\n// rsuite\nimport { CustomProvider } from 'rsuite';\n\n// types\nimport { PlayerConfigProps } from './types'\n\n// blocks\nimport PlayerComponent from './PlayerComponent'\n\ntype Props = {};\n\nconst RootComponent = React.forwardRef<Props, PlayerConfigProps>((props, ref) => {\n\n  // states\n  const [mounted, setMounted] = React.useState(false)\n\n  React.useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  if (!mounted) return null\n\n  return (\n    <CustomProvider theme=\"dark\">\n      <PlayerComponent {...props} ref={ref} />\n    </CustomProvider>\n  );\n\n})\n\nexport default RootComponent","\n// context\nimport ContextProvider, { useGlobalContext, useStreamContext } from './context'\n\n// types\nimport './globalTypes'\nimport type { IApplication } from './globalTypes'\n\n// hooks\nimport usePreloader from './hooks.player/usePreloader'\nimport useStreamActions from './hooks.stream/useStreamActions'\nimport useStreamEvents from './hooks.stream/useStreamEvents'\nimport useEventListener from './hooks/useEventListener'\n\n// snippets\nimport Player from './snippets/Player'\n\n\n// ********** EXPORTS **********\nconst Context = {\n  global: useGlobalContext,\n  stream: useStreamContext,\n}\n\nconst Hooks = {\n  actions: useStreamActions,\n  events: useStreamEvents,\n  listener: useEventListener,\n  preloader: usePreloader,\n}\n\nexport {\n  ContextProvider as MetaProvider,\n  Player as MetaEditor,\n  Context,\n  Hooks,\n}\n\n// types\nimport type { PlayerConfigProps } from './snippets/Player/types'\n\nexport type {\n  PlayerConfigProps,\n  IApplication,\n}"],"names":["KEYS","UPDATE","Reducer","state","action","type","anValue","payload","initialState","packageVersion","latest","current","needUpdate","showPreloader","licenseData","isDev","process","apiHost","project","name","pkg","version","npmUrl","license","excludes","checkUrl","urls","main","docs","support","buy","signalingServer","onlinePlayer","checkPackageVersion","url","Promise","resolve","reject","fetch","then","res","json","semver","gt","err","console","error","v","checkLicenseKey","host","window","location","hostname","includes","is_exclusion","is_valid","method","headers","body","JSON","stringify","actions","React","dispatch","cls","checkVersion","checkApiKey","hidePreloader","Context","useGlobalContext","Provider","props","value","children","UPDATE_PS_CONFIG_KEY","playerConfig","psConfig","webrtcStatus","webrtcMessage","streamStatus","streamMessage","freezeFrame","commandsList","setCommandsList","responsesList","setResponsesList","refStreamApp","dispatchPsConfig","setRefStream","app","setWebrtcStatus","status","message","setStreamStatus","setFreezeFrame","addCommand","c","slice","addResponse","repeat","updateConfig","setMuted","muted","startMuted","useStreamContext","ContextProvider","GlobalProvider","StreamContext","JsonView","JSONTree","invertTheme","shouldExpandNodeInitially","expanded","theme","extend","valueLabel","data","scheme","author","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","useSave","streamContext","toaster","useToaster","add","options","newPayload","uuid","generate","date","moment","utc","format","showNotification","debugMode","debug","push","Notification","header","closable","placement","duration","useStreamActions","save","play","player","stream","reconnect","disconnect","emitUi","isStreamActive","metaeditor","emitUIInteraction","emitSys","emitCommand","resetResolution","width","innerWidth","document","documentElement","clientWidth","height","innerHeight","clientHeight","switchMuted","nodeVideo","getElementById","usePreloader","globalContext","streamActions","connect","hide","isWebrtcConnected","isWebrtcError","useEventListener","element","eventName","handler","savedHandler","useRef","useEffect","isSupported","addEventListener","eventListener","event","removeEventListener","useStreamEvents","eventString","showActionOrErrorOnDisconnect","videoElementParent","reason","shouldShowPlayOverlay","useWindowSize","useState","windowSize","setWindowSize","handleResize","doc","style","setProperty","useResponseSave","CustomEvent","detail","dispatchEvent","useStreamResponses","responseSave","emitResponse","addResponseEventListener","removeResponseEventListener","watermarkTimer","watermark","start","clearInterval","setInterval","injector","stop","node","remove","dc","createElement","opacity","innerText","onclick","preventDefault","stopPropagation","open","setAttribute","appendChild","xpath","matchingElement","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","useWatermark","configLoaded","isLicenseActivated","useStyles","createUseStyles","rootDiv","position","top","left","right","bottom","zIndex","display","flexDirection","alignItems","justifyContent","pointerEvents","padding","webrtcError","textAlign","marginBottom","preloader","margin","cursor","Preloader","styles","PlayOutlineIcon","onClick","color","fontSize","className","SpinnerIcon","pulse","connectionHeader","WebrtcError","webrtcErrorHeader","Button","appearance","PreloaderDialog","useMedia","smUp","useMediaQuery","smDown","up","sm","down","query","getMatches","matchMedia","matches","setMatches","handleChange","addListener","removeListener","Appbar","media","isLicenseValid","toolsMenu","title","helpMenu","href","Navbar","Brand","as","target","Nav","onSelect","activeKey","undefined","Menu","map","item","index","Item","key","pullRight","startIcon","CheckRoundIcon","CustomDrawer","ref","contentPadding","onClose","setOpen","close","drawerSize","size","Drawer","Header","Title","Body","DrawerContainer","Divider","Stack","direction","spacing","demo","DrawerInfo","refDrawer","backdrop","UiButton","refDrawerInfo","ToolsIcon","lineHeight","backgroundColor","transition","PackageUpdate","appbar","Toolbar","show","useResizeObserver","box","el","controlsHeight","elConnection","nodeUiFeatures","nodePlayerUI","nodeControls","visibility","Portal","containerRoot","paddingTop","Container","PixelStreamingApplicationStyles","PixelStreamingApplicationStyle","applyStyleSheet","minHeight","overflow","userSelect","PlayerComponent","showToolbar","psHost","refRoot","isReady","setIsReady","Logger","SetLoggerVerbosity","init","initialSettings","AutoPlayVideo","autoPlay","AutoConnect","ss","StartVideoMuted","HoveringMouse","FakeMouseWithTouches","MatchViewportRes","config","Config","useUrlParams","PixelStreaming","application","Application","textContent","rootElement","onLoad","Pleloader","RootComponent","mounted","setMounted","CustomProvider","global","Hooks","events","listener"],"mappings":"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"}